{"03-Resources/Tech-Guides/qmd-obsidian-search":{"slug":"03-Resources/Tech-Guides/qmd-obsidian-search","filePath":"03-Resources/Tech-Guides/qmd-obsidian-search.md","title":"qmd-obsidian-search","links":[],"tags":[],"content":"QMD - Local Semantic Search for Obsidian\nQMD (Quick Markdown) is a local search engine that indexes your Obsidian vault and provides both keyword (BM25) and semantic (vector) search. No API keys needed ‚Äî runs entirely on your Mac using small local models.\nWhy QMD?\n\nKeyword search (qmd search) ‚Äî fast BM25 matching, finds exact terms\nSemantic search (qmd vsearch) ‚Äî understands meaning, finds related content even with different wording\nHybrid search (qmd query) ‚Äî combines both with query expansion and reranking for best results\n100% local ‚Äî no data leaves your machine\nApple Silicon optimized ‚Äî uses Metal acceleration on M1/M2/M3/M4 Macs\n\nInstallation\n# Install via bun (if not already installed: brew install oven-sh/bun/bun)\nbun install -g qmd\nInitial Setup\n1. Add your Obsidian vault as a collection\nqmd collection add ~/Documents/Obsidian --name obsidian --mask &quot;**/*.md&quot;\n2. Index the collection\nqmd update\n3. Generate vector embeddings\nThis downloads the Qwen embedding model (~2.2GB) on first run:\nqmd embed\nUsage\nBasic keyword search (fast)\nqmd search &quot;hockey drills&quot;\nSemantic search (understands intent)\nqmd vsearch &quot;exercises for beginners learning to skate&quot;\nHybrid search with reranking (best quality)\nqmd query &quot;how to practice backward skating&quot;\nList indexed files\nqmd ls obsidian\nGet a specific document\nqmd get &quot;obsidian/path/to/file.md&quot;\nCheck status\nqmd status\nAutomatic Daily Reindexing\nSet up a cron job to reindex your vault daily (runs at 3:30 AM):\necho &quot;30 3 * * * /Users/jon/.bun/bin/qmd update &amp;&amp; /Users/jon/.bun/bin/qmd embed&quot; | crontab -\nVerify it‚Äôs set:\ncrontab -l\nOutput Formats\nQMD supports multiple output formats for integration with other tools:\nqmd search &quot;query&quot; --json    # JSON output\nqmd search &quot;query&quot; --csv     # CSV output\nqmd search &quot;query&quot; --md      # Markdown output\nqmd search &quot;query&quot; --files   # File paths only\nModels Used (auto-downloaded)\n\nEmbedding: embeddinggemma-300M-Q8_0\nReranking: qwen3-reranker-0.6b-q8_0\nGeneration: Qwen3-0.6B-Q8_0\n\nModels are stored in ~/.cache/qmd/ and downloaded automatically on first use.\nIndex Location\n~/.cache/qmd/index.sqlite\n\nTroubleshooting\nReindex after adding many files\nqmd update &amp;&amp; qmd embed\nClear cache and rebuild\nqmd cleanup\nqmd update\nqmd embed\nCheck what‚Äôs indexed\nqmd collection list\nqmd status\nReferences\n\nOriginal tweet: x.com/andrarchy/status/2015783856087929254\nSource: github.com/nicobytes/qmd (assumed based on bun package)\n\n\nSet up January 2026 by Del"},"MoltBot-Docs/setup/1password-service-account-for-moltbot":{"slug":"MoltBot-Docs/setup/1password-service-account-for-moltbot","filePath":"MoltBot-Docs/setup/1password-service-account-for-moltbot.md","title":"1password-service-account-for-moltbot","links":[],"tags":[],"content":"1Password setup for Moltbot (Service Account + scoped vault)\nThis document describes how we configured Moltbot to pull an OpenAI API key from 1Password without storing the key in Moltbot config and without granting Moltbot access to your full 1Password account.\nThe goal is:\n\nMoltbot can resolve OPENAI_API_KEY at runtime (for embeddings / memory search).\nAccess is limited to one vault (least privilege).\nNo secrets are pasted into chat or committed to disk outside of 1Password.\n\n\nOverview (what we built)\n\nA dedicated 1Password vault named: Moltbot\nA 1Password Service Account with access to only that vault\nA LaunchAgent-managed Moltbot Gateway that starts via:\n\nop run --env-file ~/.clawdbot/env/gateway.env.tpl -- node ... gateway\n\nA template env file containing only an op://... reference (no secret values):\n\nOPENAI_API_KEY=op://Moltbot/&lt;ITEM_ID&gt;/password\n\nThe Service Account token stored as an environment variable for the LaunchAgent:\n\nOP_SERVICE_ACCOUNT_TOKEN=...  # scoped to the Moltbot vault\n\n(Optional, recommended) Disabled desktop app integration so personal auth can‚Äôt be used accidentally.\n\n\nPrerequisites\nSoftware\n\nMoltbot installed and running as a macOS LaunchAgent gateway.\n1Password CLI (op) installed.\n\nCheck with: op --version\n\n\nA 1Password account with access to the Admin Console for creating Service Accounts.\n\n1Password items\n\nA vault named Moltbot (or whatever you choose).\nAn item inside that vault containing your OpenAI API key stored in the Password field.\n\nItem title can be anything (special characters are fine if you use item ID references, see below).\n\n\n\nOpenAI billing\n\nOpenAI embeddings for memory search require API billing/quota.\nA ChatGPT subscription (e.g., ChatGPT Pro) does not grant API quota.\nEnsure the OpenAI project that owns the API key has pay-as-you-go enabled or credits.\n\n\nStep-by-step setup\n1) Create the vault\nCreate a vault in 1Password:\n\nName: Moltbot\nPut only the secrets you want Moltbot to access.\n\n2) Create a Service Account scoped to that vault\nIn the 1Password Admin Console:\n\nGo to Developer Tools ‚Üí Service Accounts\nCreate a new service account (e.g., ‚ÄúMoltbot‚Äù).\nGrant access to only the Moltbot vault.\nCopy the Service Account Auth Token (treat like a password).\n\n3) Store the service account token for the gateway (LaunchAgent)\nMoltbot‚Äôs gateway runs as a LaunchAgent:\n\nFile: ~/Library/LaunchAgents/com.clawdbot.gateway.plist\n\nAdd the token under EnvironmentVariables:\n&lt;key&gt;OP_SERVICE_ACCOUNT_TOKEN&lt;/key&gt;\n&lt;string&gt;PASTE_TOKEN_HERE&lt;/string&gt;\nNotes:\n\nThis token is scoped to the vault you granted. That‚Äôs the primary safety property.\nAnyone with access to your user account and that plist could read it; keep local access secure.\n\n4) Create an env template file (no secrets)\nCreate:\n\n~/.clawdbot/env/gateway.env.tpl\n\nContaining:\n# No secrets here; op resolves them at runtime.\nOPENAI_API_KEY=op://Moltbot/&lt;ITEM_ID&gt;/password\nWhy item ID instead of title?\n\nItem titles can include characters (like parentheses) that break op://... parsing.\nItem IDs are stable and safe.\n\n5) Get the item ID for the OpenAI key item\nFrom a terminal on the Mac (with OP_SERVICE_ACCOUNT_TOKEN available):\nop item get &quot;&lt;Item Title&gt;&quot; --vault &quot;Moltbot&quot; --format json \\\n  | python3 -c &#039;import sys,json; print(json.load(sys.stdin)[&quot;id&quot;])&#039;\nUse that ID in the env template:\nOPENAI_API_KEY=op://Moltbot/&lt;ITEM_ID&gt;/password\n6) Update the gateway LaunchAgent to run through op run\nEdit ~/Library/LaunchAgents/com.clawdbot.gateway.plist so the ProgramArguments look like:\n/opt/homebrew/bin/op\nrun\n--env-file\n~/.clawdbot/env/gateway.env.tpl\n--\n/opt/homebrew/bin/node\n/opt/homebrew/lib/node_modules/clawdbot/dist/entry.js\ngateway\n--port\n18789\nThis ensures the gateway inherits OPENAI_API_KEY at startup.\n7) Restart the gateway\nIf gateway RPC restart is disabled, use the CLI:\nclawdbot gateway restart\nVerify:\nclawdbot gateway status\nYou should see the command line includes op run --env-file ....\n8) Verify the service account works (without leaking secrets)\nSanity check that the service account can access only the intended vault:\nop vault list\nop item list --vault &quot;Moltbot&quot;\nTo confirm the OpenAI key is being injected (without printing it), check for presence/length only:\nop run --env-file ~/.clawdbot/env/gateway.env.tpl -- \\\n  python3 -c &#039;import os; k=os.environ.get(&quot;OPENAI_API_KEY&quot;,&quot;&quot;); print(bool(k), len(k))&#039;\n9) Confirm Moltbot memory embeddings work\nIn Moltbot, a memory_search call should no longer fail with insufficient_quota.\nIf it still fails:\n\nyour OpenAI API key‚Äôs project likely has no billing/quota enabled.\n\n\nSecurity best practices\nLeast privilege\n\nPrefer a Service Account token over desktop app integration.\nScope the service account to only the vault Moltbot needs.\n\nAvoid printing secrets\n\nNever run commands that print OP_SERVICE_ACCOUNT_TOKEN.\nNever paste tokens/keys into chat, logs, or code.\n\nToken rotation\n\nRotate/revoke the service account token if it is ever exposed.\nAfter rotation, update the LaunchAgent env var and restart the gateway.\n\nFile permissions\n\nRestrict access to:\n\n~/Library/LaunchAgents/com.clawdbot.gateway.plist\n~/.clawdbot/env/gateway.env.tpl (not secret, but still sensitive metadata)\n\n\n\nDisable personal auth path (optional but recommended)\nTo reduce the chance of using your full personal account via CLI:\n\nIn 1Password desktop app: disable Integrate with 1Password CLI.\n\nExpected result:\n\nop whoami should not authenticate as you.\nop vault list should still work when OP_SERVICE_ACCOUNT_TOKEN is set.\n\n\nTroubleshooting\n‚Äúinvalid character in secret reference‚Äù\nUse item IDs in op:// references instead of titles.\n‚Äúaccount is not signed in‚Äù / ‚Äúno account found for filter‚Äù\nThat‚Äôs expected if you disabled desktop app integration and are not using personal auth.\nService accounts should still work via OP_SERVICE_ACCOUNT_TOKEN.\nOpenAI error: insufficient_quota\n\nAdd billing / enable pay-as-you-go for the OpenAI API project.\nChatGPT subscriptions do not apply to API usage.\n\n\nNotes about our specific setup (for this Mac)\n\nVault name: Moltbot\nThe OpenAI key is referenced via item ID (recommended).\nGateway is managed by LaunchAgent: com.clawdbot.gateway\nGateway now starts via op run --env-file ~/.clawdbot/env/gateway.env.tpl -- ...\n"},"MoltBot-Docs/setup/agentmail-setup":{"slug":"MoltBot-Docs/setup/agentmail-setup","filePath":"MoltBot-Docs/setup/agentmail-setup.md","title":"agentmail-setup","links":[],"tags":[],"content":"AgentMail Integration with Moltbot\n\nPurpose: Give your agent a dedicated email address that forwards to your chat (Telegram, Discord, etc.)\n\nOverview\nFlow:\nEmail sent to agent@agentmail.to\n    ‚Üì\nAgentMail receives it\n    ‚Üì\nWebhook fires to your Moltbot instance (via Tailscale Funnel)\n    ‚Üì\nTransform filters by allowlist\n    ‚Üì\nHook session processes the email (can check calendar, search, etc.)\n    ‚Üì\nResponse delivered to your chat channel\n\nWhy AgentMail over Gmail webhooks?\n\nPurpose-built for agents (simple API, webhooks just work)\nNo OAuth complexity\nWebhook contains full email content (Gmail Pub/Sub only sends notification, requires separate fetch)\nFree tier is generous\n\n\nPrerequisites\n\nMoltbot running with Tailscale Funnel enabled (gateway.tailscale.mode: &quot;funnel&quot;)\nPython 3.x with a virtual environment\nAgentMail account at agentmail.dev\n\n\nStep 1: Get AgentMail API Key\n\nSign up at agentmail.dev\nGo to Settings ‚Üí API Keys\nCreate a new API key\nSave it securely (you‚Äôll need it for all API calls)\n\n\nStep 2: Install AgentMail SDK\ncd ~/clawd\npython3 -m venv .venv\nsource .venv/bin/activate\npip install agentmail\n\nStep 3: Create Your Inbox\nfrom agentmail import AgentMail\n \nclient = AgentMail(api_key=&quot;am_your_api_key_here&quot;)\n \ninbox = client.inboxes.create(\n    username=&quot;mybot&quot;,  # becomes mybot@agentmail.to\n    display_name=&quot;My Bot&quot;\n)\nprint(f&quot;Created: {inbox.inbox_id}&quot;)\n\nStep 4: Configure Moltbot Webhook Endpoint\n4.1 Create the transform file\nCreate ~/.clawdbot/hooks/email-allowlist.ts:\n/**\n * AgentMail webhook transform - allowlist trusted senders\n */\n \nconst ALLOWLIST = [\n  &#039;youremail@gmail.com&#039;,\n  &#039;you@work.com&#039;,\n  // Add trusted senders here\n];\n \nconst TELEGRAM_USER_ID = &#039;YOUR_TELEGRAM_USER_ID&#039;;  // Find via @userinfobot\n \nfunction extractEmail(from: any): string | null {\n  if (!from) return null;\n  \n  // Handle array format: [{email: &quot;...&quot;, name: &quot;...&quot;}]\n  if (Array.isArray(from) &amp;&amp; from[0]?.email) {\n    return from[0].email;\n  }\n  \n  // Handle string format: &quot;Name &lt;email@example.com&gt;&quot;\n  if (typeof from === &#039;string&#039;) {\n    const match = from.match(/&lt;([^&gt;]+)&gt;/) || from.match(/([^\\s&lt;&gt;]+@[^\\s&lt;&gt;]+)/);\n    return match ? match[1] : null;\n  }\n  \n  return null;\n}\n \nexport default function(input: any) {\n  // ‚ö†Ô∏è IMPORTANT: Moltbot wraps the webhook body in input.payload\n  const payload = input?.payload;\n  const message = payload?.message;\n  \n  // Try both &#039;from&#039; and &#039;from_&#039; (AgentMail SDK uses from_)\n  const from = extractEmail(message?.from || message?.from_);\n  \n  if (!from || !ALLOWLIST.some(addr =&gt; addr.toLowerCase() === from.toLowerCase())) {\n    console.log(`[email-allowlist] ‚ùå Blocked email from: ${from || &#039;unknown&#039;}`);\n    return null;  // Drop the webhook\n  }\n  \n  console.log(`[email-allowlist] ‚úÖ Allowed email from: ${from}`);\n  \n  const subject = message?.subject || &#039;(no subject)&#039;;\n  const body = message?.text || message?.preview || &#039;&#039;;\n  \n  // Return format for hook wake action\n  return {\n    message: `üì¨ Email from ${from}:\\n\\nSubject: ${subject}\\n\\n${body}`,\n    channel: &#039;telegram&#039;,\n    to: `telegram:${TELEGRAM_USER_ID}`,\n    accountId: &#039;default&#039;,\n    deliver: true\n  };\n}\n4.2 Add hooks config to clawdbot.json\n{\n  &quot;hooks&quot;: {\n    &quot;enabled&quot;: true,\n    &quot;path&quot;: &quot;/hooks&quot;,\n    &quot;token&quot;: &quot;hooks_generate_a_random_token_here&quot;,\n    &quot;transformsDir&quot;: &quot;~/.clawdbot/hooks&quot;,\n    &quot;mappings&quot;: [\n      {\n        &quot;id&quot;: &quot;agentmail&quot;,\n        &quot;match&quot;: {\n          &quot;path&quot;: &quot;/agentmail&quot;\n        },\n        &quot;transform&quot;: {\n          &quot;module&quot;: &quot;email-allowlist.ts&quot;\n        }\n      }\n    ]\n  }\n}\n4.3 Restart Moltbot\nThe gateway needs to restart to load the new hooks config. Either:\n\nUse clawdbot gateway restart\nOr patch the config (which triggers auto-restart)\n\n\nStep 5: Register the Webhook with AgentMail\nGet your Tailscale Funnel URL (check clawdbot status or logs for the URL).\nfrom agentmail import AgentMail\n \nclient = AgentMail(api_key=&quot;am_your_api_key_here&quot;)\n \nwebhook = client.webhooks.create(\n    url=&quot;https://YOUR-MACHINE.tailXXXXX.ts.net/hooks/agentmail,\n    event_types=[&quot;message.received&quot;]\n)\nprint(f&quot;Webhook ID: {webhook.webhook_id}&quot;)\n\nStep 6: Test It\n\nTest locally first:\n\ncurl -s &quot;http://127.0.0.1:18789/hooks/agentmail?token=hooks_your_token&quot; \\\n  -X POST -H &quot;Content-Type: application/json&quot; \\\n  -d &#039;{&quot;type&quot;:&quot;event&quot;,&quot;message&quot;:{&quot;from&quot;:&quot;youremail@gmail.com&quot;,&quot;subject&quot;:&quot;Test&quot;,&quot;text&quot;:&quot;Hello!&quot;}}&#039;\nShould return: {&quot;ok&quot;:true,&quot;runId&quot;:&quot;...&quot;}\n\nTest via Tailscale Funnel:\n\ncurl -s &quot;https://YOUR-MACHINE.tailXXXXX.ts.net/hooks/agentmail \\\n  -X POST -H &quot;Content-Type: application/json&quot; \\\n  -d &#039;{&quot;type&quot;:&quot;event&quot;,&quot;message&quot;:{&quot;from&quot;:&quot;youremail@gmail.com&quot;,&quot;subject&quot;:&quot;Test&quot;,&quot;text&quot;:&quot;Hello!&quot;}}&#039;\n\nSend a real email to your AgentMail address and check your Telegram.\n\n\nGotchas &amp; Fixes\n‚ùå ‚Äúhook mapping failed‚Äù or ‚Äúrequires message‚Äù\nCause: Transform return format is wrong.\nFix: Return { message: &quot;...&quot;, channel: &quot;telegram&quot; } ‚Äî not { action: &quot;wake&quot;, text: &quot;...&quot; }\n‚ùå Blocked email from: unknown\nCause: The from field extraction is failing.\nFix: AgentMail sends from as a string like &quot;Name &lt;email@example.com&gt;&quot;, not an array. Use the extractEmail() helper that handles both formats.\n‚ùå 404 on webhook endpoint\nCause: The hooks.path config or match.path is wrong.\nFix:\n\nSet hooks.path: &quot;/hooks&quot; in config\nSet match.path: &quot;/agentmail&quot; in the mapping (NOT /hooks/agentmail)\nFinal URL becomes: /hooks + /agentmail = /hooks/agentmail\n\n‚ùå Transform changes not taking effect\nCause: Transforms don‚Äôt hot-reload.\nFix: Restart the gateway after editing transform files.\n‚ùå Webhook fires but no Telegram notification\nCause: The hook session runs but doesn‚Äôt know where to deliver.\nFix: Include to: &quot;telegram:USER_ID&quot; in the transform return object.\n‚ùå Email arrives in AgentMail but webhook doesn‚Äôt fire\nCause: Webhook URL is unreachable from the internet.\nFix:\n\nEnsure Tailscale Funnel is enabled and running\nTest the URL with curl from outside your network\nCheck AgentMail webhook logs (if available)\n\n\nPayload Reference\nAgentMail webhook payload (message.received)\n{\n  &quot;type&quot;: &quot;event&quot;,\n  &quot;event_type&quot;: &quot;message.received&quot;,\n  &quot;event_id&quot;: &quot;evt_xxx&quot;,\n  &quot;message&quot;: {\n    &quot;inbox_id&quot;: &quot;mybot@agentmail.to&quot;,\n    &quot;thread_id&quot;: &quot;thd_xxx&quot;,\n    &quot;message_id&quot;: &quot;msg_xxx&quot;,\n    &quot;from&quot;: &quot;Sender Name &lt;sender@example.com&gt;&quot;,\n    &quot;to&quot;: [&quot;mybot@agentmail.to&quot;],\n    &quot;subject&quot;: &quot;Email subject&quot;,\n    &quot;text&quot;: &quot;Plain text body&quot;,\n    &quot;html&quot;: &quot;&lt;p&gt;HTML body&lt;/p&gt;&quot;,\n    &quot;preview&quot;: &quot;First 200 chars...&quot;,\n    &quot;attachments&quot;: [...],\n    &quot;timestamp&quot;: &quot;2026-01-28T23:00:00Z&quot;\n  }\n}\nMoltbot transform input (what your function receives)\n{\n  &quot;payload&quot;: { ... the webhook body above ... },\n  &quot;headers&quot;: { &quot;host&quot;: &quot;...&quot;, &quot;content-type&quot;: &quot;...&quot;, ... },\n  &quot;url&quot;: &quot;http://...&quot;,\n  &quot;path&quot;: &quot;agentmail&quot;\n}\n‚ö†Ô∏è Key insight: Moltbot wraps the incoming webhook body in input.payload, so access the message via input.payload.message.\n\nUseful Commands\nList messages in inbox\nmessages = client.inboxes.messages.list(inbox_id=&quot;mybot@agentmail.to&quot;, limit=10)\nfor msg in messages.messages:\n    print(f&quot;{msg.subject} from {msg.from_}&quot;)\nCheck webhook status\nwebhooks = client.webhooks.list()\nfor wh in webhooks.webhooks:\n    print(f&quot;{wh.webhook_id}: {wh.url}&quot;)\nSend email from your agent\nclient.inboxes.messages.send(\n    inbox_id=&quot;mybot@agentmail.to&quot;,\n    to=&quot;recipient@example.com&quot;,\n    subject=&quot;Hello from My Bot&quot;,\n    text=&quot;This is an automated message.&quot;\n)\n\nFile Locations\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFilePurpose~/.clawdbot/clawdbot.jsonMain config (hooks section)~/.clawdbot/hooks/email-allowlist.tsTransform that filters &amp; formats emails~/.clawdbot/logs/gateway.logCheck for [email-allowlist] log entries\n\nSecurity Notes\n\nAlways use an allowlist ‚Äî don‚Äôt process emails from unknown senders\nUse a random token in the webhook URL ‚Äî prevents unauthorized webhook calls\nTailscale Funnel provides the HTTPS endpoint ‚Äî no need for ngrok or port forwarding\n\n\nLast updated: 2026-01-28\nSetup time: ~30 minutes (once you know the gotchas)"},"MoltBot-Docs/setup/launchagent":{"slug":"MoltBot-Docs/setup/launchagent","filePath":"MoltBot-Docs/setup/launchagent.md","title":"launchagent","links":[],"tags":[],"content":"LaunchAgent Configuration\nMoltbot runs as a macOS LaunchAgent, which means it starts automatically on login and stays running.\nFile Location\n~/Library/LaunchAgents/com.clawdbot.gateway.plist\n\nCurrent Configuration\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\n&lt;plist version=&quot;1.0&quot;&gt;\n  &lt;dict&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.clawdbot.gateway&lt;/string&gt;\n    \n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;KeepAlive&lt;/key&gt;\n    &lt;true/&gt;\n    \n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n      &lt;string&gt;/opt/homebrew/bin/node&lt;/string&gt;\n      &lt;string&gt;/opt/homebrew/lib/node_modules/clawdbot/dist/entry.js&lt;/string&gt;\n      &lt;string&gt;gateway&lt;/string&gt;\n      &lt;string&gt;--port&lt;/string&gt;\n      &lt;string&gt;18789&lt;/string&gt;\n    &lt;/array&gt;\n    \n    &lt;key&gt;StandardOutPath&lt;/key&gt;\n    &lt;string&gt;/Users/YOUR_USERNAME/.clawdbot/logs/gateway.log&lt;/string&gt;\n    &lt;key&gt;StandardErrorPath&lt;/key&gt;\n    &lt;string&gt;/Users/YOUR_USERNAME/.clawdbot/logs/gateway.err.log&lt;/string&gt;\n    \n    &lt;key&gt;EnvironmentVariables&lt;/key&gt;\n    &lt;dict&gt;\n      &lt;key&gt;HOME&lt;/key&gt;\n      &lt;string&gt;/Users/YOUR_USERNAME&lt;/string&gt;\n      &lt;key&gt;PATH&lt;/key&gt;\n      &lt;string&gt;/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin&lt;/string&gt;\n      &lt;key&gt;CLAWDBOT_GATEWAY_PORT&lt;/key&gt;\n      &lt;string&gt;18789&lt;/string&gt;\n      &lt;key&gt;CLAWDBOT_GATEWAY_TOKEN&lt;/key&gt;\n      &lt;string&gt;[REDACTED]&lt;/string&gt;\n      &lt;key&gt;OP_SERVICE_ACCOUNT_TOKEN&lt;/key&gt;\n      &lt;string&gt;[REDACTED]&lt;/string&gt;\n    &lt;/dict&gt;\n  &lt;/dict&gt;\n&lt;/plist&gt;\nKey Environment Variables\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVariablePurposeCLAWDBOT_GATEWAY_PORTPort the gateway listens onCLAWDBOT_GATEWAY_TOKENAuth token for gateway APIOP_SERVICE_ACCOUNT_TOKEN1Password service account token (for credential access)\nManaging the LaunchAgent\nCheck status\nlaunchctl list | grep moltbot\nStop\nlaunchctl unload ~/Library/LaunchAgents/com.clawdbot.gateway.plist\nStart\nlaunchctl load ~/Library/LaunchAgents/com.clawdbot.gateway.plist\nRestart (via Moltbot)\nclawdbot gateway restart\nView logs\ntail -f ~/.clawdbot/logs/gateway.log\ntail -f ~/.clawdbot/logs/gateway.err.log\nAfter Editing the Plist\nIf you modify the plist file directly:\n# Unload the old version\nlaunchctl unload ~/Library/LaunchAgents/com.clawdbot.gateway.plist\n \n# Load the new version\nlaunchctl load ~/Library/LaunchAgents/com.clawdbot.gateway.plist\nOr use: clawdbot gateway restart\nCommon Issues\nGateway not starting\n\nCheck syntax: plutil ~/Library/LaunchAgents/com.clawdbot.gateway.plist\nCheck logs: ~/.clawdbot/logs/gateway.err.log\nVerify node path: which node\n\nEnvironment variables not working\n\nlaunchd loads env vars at boot time\nAfter editing, must unload/reload the plist\nUse launchctl setenv for session-wide vars (less reliable)\n\n\nLast updated: 2026-02-01"},"MoltBot-Docs/setup/memory-embeddings":{"slug":"MoltBot-Docs/setup/memory-embeddings","filePath":"MoltBot-Docs/setup/memory-embeddings.md","title":"memory-embeddings","links":[],"tags":[],"content":"Memory Embeddings\nHow Moltbot remembers things across sessions.\nOverview\nMoltbot uses semantic search to recall information from memory files (MEMORY.md and memory/*.md). This is powered by text embeddings ‚Äî numerical representations of text that capture meaning.\nArchitecture\nTwo separate models work together:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRoleModelProviderChat/ReasoningClaude Opus 4.5AnthropicEmbeddingstext-embedding-3-smallOpenAI\nThese are independent ‚Äî changing your chat model doesn‚Äôt affect embeddings, and vice versa.\nHow It Works\n\nIndexing: When memory files change, their content is chunked and converted to embedding vectors via OpenAI‚Äôs API\nSearch: When memory_search runs, your query is embedded and compared against stored vectors\nRetrieval: The most semantically similar chunks are returned with file path and line numbers\nReading: memory_get fetches the actual text for context\n\nWhy OpenAI for Embeddings?\nAnthropic doesn‚Äôt offer an embedding API ‚Äî Claude is a generative model only. Common embedding providers:\n\nOpenAI (current default): text-embedding-3-small, text-embedding-3-large\nCohere: embed-english-v3.0\nVoyage AI: Specialized for retrieval\nGoogle: text-embedding-004\n\nOpenAI‚Äôs small model is fast, cheap, and effective for most use cases.\nConfiguration\nEmbedding settings live in Moltbot‚Äôs config. The default uses OpenAI with the API key from your auth profile.\nCost\ntext-embedding-3-small is very cheap:\n\n~$0.02 per 1M tokens\nA typical memory search costs a fraction of a cent\n\n\nLast updated: 2026-01-26"},"MoltBot-Docs/setup/obsidian-publishing":{"slug":"MoltBot-Docs/setup/obsidian-publishing","filePath":"MoltBot-Docs/setup/obsidian-publishing.md","title":"obsidian-publishing","links":[],"tags":[],"content":"Obsidian ‚Üí Quartz Publishing Setup\nPublish Obsidian notes to a static website using Quartz Syncer and GitHub Pages.\nDocs: saberzero1.github.io/quartz-syncer-docs/\nArchitecture Overview\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Obsidian Vault ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Quartz Syncer   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  GitHub Repo    ‚îÇ\n‚îÇ                 ‚îÇ     ‚îÇ  (plugin)        ‚îÇ     ‚îÇ  (Quartz)       ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                                          ‚îÇ\n                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ auto-deploy\n                        ‚îÇ  GitHub Pages   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                        ‚îÇ  (Actions)      ‚îÇ\n                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n                        ‚îÇ  Your Website   ‚îÇ\n                        ‚îÇ  notes.you.com  ‚îÇ\n                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nFlow:\n\nWrite notes in Obsidian with publish: true in frontmatter\nOpen Quartz Syncer publication center\nSelect notes ‚Üí click ‚ÄúPublish Selected Changes‚Äù\nGitHub Actions auto-builds and deploys\nSite is live\n\n\nPrerequisites\n\nObsidian (desktop or mobile)\nGitHub account\nCustom domain (optional)\n\n\nStep 1: Create Quartz Repository\nQuick start: Click here to create from template\nOr manually:\ngit clone github.com/jackyzha0/quartz.git\ncd quartz\nnpm install\n\nStep 2: Configure GitHub Pages\nEnable Pages\n\nGo to your repo ‚Üí Settings ‚Üí Pages\nUnder ‚ÄúSource‚Äù, select GitHub Actions\n\nAdd Deploy Workflow\nCreate .github/workflows/deploy.yml:\nname: Deploy Quartz site to GitHub Pages\n \non:\n  push:\n    branches:\n      - v4\n \npermissions:\n  contents: read\n  pages: write\n  id-token: write\n \nconcurrency:\n  group: &quot;pages&quot;\n  cancel-in-progress: false\n \njobs:\n  build:\n    runs-on: ubuntu-22.04\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n \n      - uses: actions/setup-node@v4\n        with:\n          node-version: 22\n \n      - name: Install Dependencies\n        run: npm ci\n \n      - name: Build Quartz\n        run: npx quartz build\n \n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: public\n \n  deploy:\n    needs: build\n    environment:\n      name: github-pages\n      url: ${{ steps.deployment.outputs.page_url }}\n    runs-on: ubuntu-latest\n    steps:\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\nCommit and push. Site deploys to &lt;username&gt;.github.io/&lt;repo-name&gt;.\n\nStep 3: Generate GitHub Token\nFine-grained Token (Recommended)\n\nGo to GitHub Token Settings\nToken name: Quartz Syncer\nExpiration: Set a date (max 1 year)\nRepository access: Select ‚ÄúOnly select repositories‚Äù ‚Üí choose your Quartz repo\nPermissions ‚Üí Repository permissions: Set Contents to ‚ÄúRead and write‚Äù\nClick Generate token\nCopy immediately (won‚Äôt be shown again)\n\n\nStep 4: Install Quartz Syncer Plugin\n\nIn Obsidian: Settings ‚Üí Community Plugins ‚Üí Browse\nSearch ‚ÄúQuartz Syncer‚Äù\nInstall ‚Üí Enable\n\nOr install via BRAT for beta versions.\n\nStep 5: Configure Quartz Syncer\nIn Obsidian: Settings ‚Üí Community Plugins ‚Üí Quartz Syncer\nGit Settings Tab\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSettingValueRemote URLgithub.com/YOUR_USERNAME/YOUR_REPO.gitBranchv4 (or your branch)ProviderGitHubAuthentication TypeUsername &amp; Token/PasswordUsernameYour GitHub usernameAccess TokenPaste your token\n‚úÖ Green checkmark = successful connection\n\nStep 6: Configure Quartz\nEdit quartz.config.ts in your repo:\nconst config: QuartzConfig = {\n  configuration: {\n    pageTitle: &quot;Your Site Name&quot;,\n    pageTitleSuffix: &quot; | Your Site&quot;,\n    baseUrl: &quot;notes.yourdomain.com&quot;,  // No https://, no trailing slash\n    defaultDateType: &quot;modified&quot;,\n    // ...\n  },\n  plugins: {\n    transformers: [\n      Plugin.CrawlLinks({ markdownLinkResolution: &quot;shortest&quot; }),\n      // Match your Obsidian link settings\n    ],\n  },\n}\nAdd OpenGraph Image (optional)\nReplace quartz/static/og-image.png with your image (1200x630px).\n\nStep 7: Custom Domain (Optional)\nFor Subdomain (e.g., notes.yourdomain.com)\nDNS: Add CNAME record\nType: CNAME\nName: notes\nValue: YOUR_USERNAME.github.io\n\nGitHub: Settings ‚Üí Pages ‚Üí Custom domain ‚Üí enter notes.yourdomain.com\nFor Apex Domain (e.g., yourdomain.com)\nDNS: Add A records\n185.199.108.153\n185.199.109.153\n185.199.110.153\n185.199.111.153\n\n\nUsage\nMark Notes for Publishing\nAdd frontmatter property to any note:\n---\npublish: true\n---\nQuick ways to add:\n\nCommand palette: Quartz Syncer: add publication flag\nProperties panel (Cmd+;) ‚Üí Add checkbox publish\nSet up hotkey via MetaEdit plugin for one-key toggle\n\nPublish Notes\n\n\nOpen Publication Center:\n\nCommand palette: Quartz Syncer: Open publication center\nOr click the Quartz crystal icon in sidebar\n\n\n\nReview changes:\n\nUnpublished notes: New notes to add\nChanged notes: Modified notes to update\nPublished notes: Check to unpublish/remove\nClick any file to see diff\n\n\n\nClick ‚ÄúPUBLISH SELECTED CHANGES‚Äù\n\n\nSite updates automatically (~1-2 min)\n\n\n\nAgent Instructions\nFor AI agents setting this up:\nQuick Setup Checklist\n‚ñ° Fork/clone Quartz repo to GitHub\n‚ñ° Add .github/workflows/deploy.yml\n‚ñ° Settings ‚Üí Pages ‚Üí Source: GitHub Actions\n‚ñ° Generate fine-grained token (Contents: Read/write)\n‚ñ° Install Quartz Syncer plugin in Obsidian\n‚ñ° Configure plugin with repo URL + token\n‚ñ° Update quartz.config.ts (pageTitle, baseUrl)\n‚ñ° (Optional) Configure custom domain\n\nKey Paths &amp; URLs\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nItemLocationPlugin docssaberzero1.github.io/quartz-syncer-docs/Quartz templategithub.com/new settingsgithub.com/settings/personal-access-tokens/newQuartz configquartz.config.ts in repo rootDeploy workflow.github/workflows/deploy.ymlStatic assetsquartz/static/\nTroubleshooting Commands\n# Check if repo exists and is accessible\ngh repo view YOUR_USERNAME/quartz\n \n# Check recent workflow runs\ngh run list -R YOUR_USERNAME/quartz --limit 5\n \n# Check DNS propagation\ndig notes.yourdomain.com\n \n# Test Quartz build locally\ncd ~/Code/quartz &amp;&amp; npx quartz build --serve\nCommon Issues\n‚ÄúConnection failed‚Äù in plugin settings\n\nVerify repo URL format: github.com/user/repo.git\nCheck token has ‚ÄúContents: Read and write‚Äù permission\nToken must be scoped to the correct repository\n\nGitHub Actions fails\n\nSettings ‚Üí Pages ‚Üí Source must be ‚ÄúGitHub Actions‚Äù\nDelete existing github-pages environment if permission errors\nCheck Actions tab for specific error\n\nCustom domain not working\n\nDNS propagation can take up to 48h (usually &lt;1h)\nVerify: dig notes.yourdomain.com\nEnsure CNAME points to username.github.io (not the repo URL)\n\nNotes not appearing in publication center\n\nMust have publish: true in frontmatter (not &quot;true&quot;, not yes)\nProperty name is case-sensitive\nCheck plugin settings for custom publish key\n\nChanges not appearing on site\n\nWait for GitHub Actions to complete (~1-2 min)\nCheck Actions tab for build status\nHard refresh browser (Cmd+Shift+R)\n\nTesting Flow\n\nCreate test note with publish: true\nOpen publication center\nNote should appear under ‚ÄúUnpublished notes‚Äù\nClick ‚ÄúPublish Selected Changes‚Äù\nCheck GitHub repo for new commit\nCheck Actions tab for deployment\nVisit site to verify\n\n\nAdvanced Features\nQuartz Syncer supports:\n\nDataview integration ‚Äî Pre-renders Dataview queries\nEmbeds ‚Äî Processes Obsidian embeds for Quartz\nFolder filtering ‚Äî Publish only specific folders\nMultiple providers ‚Äî GitHub, GitLab, Codeberg, Bitbucket, self-hosted\n\nSee plugin docs for configuration.\n\nLast updated: 2026-01-28"},"index":{"slug":"index","filePath":"index.md","title":"Jonokasten","links":[],"tags":[],"content":"\nTech Guides &amp; Knowledge Base\nA collection of technical guides, tutorials, and notes on software development, AI tools, and productivity systems.\nTopics\n\nAI &amp; Automation ‚Äî Working with AI assistants, coding agents, and automation tools\nDevelopment ‚Äî Ruby on Rails, React, React Native, and modern web development\nDevOps ‚Äî macOS setup, Linux, deployment, and infrastructure\nProductivity ‚Äî Tools, workflows, and systems for getting things done\n\n\n\n[[MoltBot-Docs/1password-service-account-for-moltbot|1Password Service Account]]\n[[MoltBot-Docs/launchagent|LaunchAgent Setup]]\n[[MoltBot-Docs/agentmail-setup|AgentMail Setup]]\n[[MoltBot-Docs/memory-embeddings|Memory Embeddings]]\n[[MoltBot-Docs/obsidian-publishing|Obsidian Publishing]]\n[[03-Resources/Tech-Guides/qmd-obsidian-search|QMD - Local Semantic Search]]\n"}}